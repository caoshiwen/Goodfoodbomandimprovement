# 食品成本计算与优化工具

专业的食品成本分析与优化解决方案，支持寿司、蛋糕、面包等多种食品类型的成本计算和优化建议。

## 📋 功能特性

### 1. 数据输入
- **手动输入模式**：通过表单直接输入配方信息
- **Excel导入**：批量导入配方数据
- 支持多种食物类型（寿司、蛋糕、面包、披萨、汉堡等）
- 材料管理（名称、单位、单价、用量、损耗率）

### 2. 成本计算
- 精确的成本计算引擎
- 材料成本自动计算（含损耗率）
- 人工成本独立计算
- 单份成本自动分摊
- 可视化图表展示成本分布

### 3. 优化分析
- **材料替代建议**：智能推荐替代材料
- **用量优化**：分析高成本材料并提出优化建议
- **损耗率优化**：识别高损耗材料并提供改进方案
- **配方整体优化**：批量生产、流程优化等建议
- 优先级分类（高/中/低）
- 可行性评估和品质影响分析

### 4. 报告生成
- **成本汇总报告**：多配方成本对比
- **详细分析报告**：单个配方深度分析
- **优化建议报告**：完整的优化方案
- **配方对比报告**：多配方横向对比
- 支持导出Excel和PDF格式

## 🚀 快速开始

### 安装要求
- 现代浏览器（Chrome、Firefox、Edge、Safari等）
- 无需安装任何软件或服务器

### 使用步骤

1. **打开工具**
   - 直接在浏览器中打开 `code/index.html` 文件

2. **添加配方**
   - 选择"数据输入"标签页
   - 填写配方基本信息（名称、类型、产出数量、人工成本）
   - 添加材料信息（至少一种材料）
   - 点击"保存配方"

3. **计算成本**
   - 切换到"成本计算"标签页
   - 选择要计算的配方
   - 点击"计算成本"查看详细结果

4. **优化分析**
   - 切换到"优化分析"标签页
   - 选择要优化的配方
   - 点击"生成优化方案"查看建议

5. **生成报告**
   - 切换到"报告生成"标签页
   - 选择报告类型和配方
   - 点击"生成报告"
   - 可导出为Excel或PDF

## 📊 Excel导入格式

### 模板下载
在"数据输入"页面点击"下载Excel模板"获取标准模板。

### 格式说明
| 配方名称 | 食物类型 | 产出数量 | 人工成本 | 材料名称 | 单位 | 单价 | 用量 | 损耗率 |
|---------|---------|---------|---------|---------|------|------|------|--------|
| 三文鱼寿司 | 寿司 | 2 | 2 | 三文鱼 | 克 | 0.08 | 30 | 0.05 |
| | | | | 米饭 | 克 | 0.005 | 150 | 0.02 |
| | | | | 海苔 | 片 | 0.5 | 1 | 0 |

**重要规则：**
- 第一行为标题，不可修改
- 每个配方的第一行填写完整信息
- 材料行的配方信息留空
- 损耗率为0-1之间的小数（如0.05表示5%）

## 💡 核心算法

### 成本计算公式
```
材料成本 = Σ(单价 × 用量 × (1 + 损耗率))
总成本 = 材料成本 + 人工成本
单份成本 = 总成本 ÷ 产出数量
```

### 优化评分算法
```
综合评分 = 成本节省(40%) + 可行性(30%) + 品质影响(30%)
```

- **高优先级**：评分≥80分
- **中优先级**：60分≤评分<80分
- **低优先级**：评分<60分

## 📁 项目结构

```
成本计算工具/
├── code/                      # 源代码目录
│   ├── index.html            # 主页面
│   ├── css/
│   │   └── style.css         # 样式文件
│   └── js/
│       ├── calculator.js     # 成本计算引擎
│       ├── optimizer.js      # 优化算法模块
│       ├── fileHandler.js    # Excel导入导出
│       ├── reportGenerator.js # 报告生成器
│       └── app.js            # 主应用逻辑
├── inputdata/                 # 输入数据
│   └── 材料数据库.json        # 材料替代品数据库
├── outputdata/                # 输出数据（导出的报告）
├── design/                    # 设计文档
├── unittest/                  # 单元测试
└── report/                    # 生成的报告
```

## 🔧 技术栈

- **前端框架**：纯HTML5 + CSS3 + JavaScript（ES6+）
- **图表库**：Chart.js 4.4.0
- **Excel处理**：SheetJS (XLSX.js) 0.18.5
- **数据存储**：LocalStorage（本地浏览器存储）
- **响应式设计**：支持PC、平板、手机

## 🎯 使用场景

1. **餐饮行业**
   - 餐厅菜品成本分析
   - 菜单价格优化
   - 食材采购决策

2. **烘焙行业**
   - 蛋糕、面包成本核算
   - 配方优化
   - 利润分析

3. **食品加工**
   - 产品成本控制
   - 工艺改进
   - 供应商选择

## 📝 示例配方

### 示例1：三文鱼寿司
- **产出**：2份
- **人工成本**：2元
- **材料**：
  - 三文鱼：30克 × 0.08元/克
  - 米饭：150克 × 0.005元/克
  - 海苔：1片 × 0.5元/片
  - 酱油：10毫升 × 0.01元/毫升
- **单份成本**：约3.5元

### 示例2：巧克力蛋糕
- **产出**：1个
- **人工成本**：3元
- **材料**：
  - 面粉：200克 × 0.01元/克
  - 鸡蛋：3个 × 0.8元/个
  - 糖：150克 × 0.01元/克
  - 黄油：100克 × 0.03元/克
  - 巧克力：80克 × 0.05元/克
- **单份成本**：约12元

## 🔒 数据隐私

- 所有数据存储在本地浏览器中
- 不上传到任何服务器
- 可随时导出备份
- 支持清除所有数据

## 📱 响应式支持

- **桌面端**：完整功能，大屏优化
- **平板端**：触摸优化，布局自适应
- **手机端**：单栏布局，大按钮设计

## ⚠️ 注意事项

1. **数据备份**：建议定期导出配方数据作为备份
2. **浏览器兼容**：推荐使用Chrome、Firefox、Edge等现代浏览器
3. **数据清除**：清除浏览器缓存会丢失所有配方数据
4. **损耗率设置**：根据实际情况合理设置损耗率（通常0.02-0.15）
5. **人工成本**：包含制作该配方的所有人工费用

## 🆘 常见问题

### Q: 如何批量导入配方？
A: 下载Excel模板，按格式填写数据后，在"数据输入"页面选择"导入Excel"上传文件。

### Q: 数据会丢失吗？
A: 数据存储在浏览器本地，除非清除浏览器数据，否则不会丢失。建议定期导出备份。

### Q: 可以在手机上使用吗？
A: 可以，工具支持响应式设计，在手机浏览器中可正常使用。

### Q: 优化建议的准确性如何？
A: 优化建议基于材料替代数据库和算法分析，需结合实际情况判断。

### Q: 如何自定义材料替代品？
A: 可以编辑 `inputdata/材料数据库.json` 文件添加新的材料替代关系。

## 📞 技术支持

如有问题或建议，欢迎反馈。

## 📄 许可证

本项目仅供学习和参考使用。

## 🎉 更新日志

### V1.0 (2025-11-23)
- ✅ 完整的成本计算功能
- ✅ 智能优化建议系统
- ✅ Excel导入导出
- ✅ 多种报告类型
- ✅ 响应式设计
- ✅ 数据可视化图表
- ✅ 本地数据存储

---

**开始使用**：直接打开 `code/index.html` 文件即可开始您的成本分析之旅！
